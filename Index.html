<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastIPL - सबसे तेज़ IPL लाइव स्कोर</title>
    <meta name="description" content="बिना भटकाव के सिर्फ IPL लाइव स्कोर - सबसे तेज़ अपडेट">
    <meta name="theme-color" content="#e53e3e">
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --bg: #f5f5f5;
            --text: #222;
            --card-bg: #fff;
            --primary: #e53e3e;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #121212;
                --text: #f5f5f5;
                --card-bg: #1e1e1e;
            }
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, sans-serif;
        }
        body {
            background: var(--bg);
            color: var(--text);
            padding: 12px;
            max-width: 600px;
            margin: 0 auto;
            min-height: 100vh;
        }
        h1 {
            font-size: 1.5rem;
            margin-bottom: 16px;
            text-align: center;
            color: var(--primary);
        }
        .match-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .teams {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
            gap: 8px;
        }
        .team {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }
        .score {
            font-size: 1.5rem;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
        }
        .info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
            margin-top: 8px;
        }
        .balls {
            display: flex;
            gap: 4px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        .ball {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            border: 1px solid #ddd;
        }
        .ball.wicket {
            background: #e53e3e;
            color: white;
            border: none;
        }
        .ball.four {
            color: #3182ce;
            font-weight: bold;
        }
        .ball.six {
            color: #38a169;
            font-weight: bold;
        }
        .last-update {
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            margin-top: 16px;
        }
        .skeleton {
            animation: pulse 1.5s infinite;
            background: #ddd;
            border-radius: 4px;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .no-matches {
            text-align: center;
            padding: 16px;
            color: #666;
        }
        footer {
            text-align: center;
            margin-top: 24px;
            font-size: 0.8rem;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>IPL लाइव स्कोर</h1>
    
    <div id="matches">
        <!-- स्केलेटन लोडिंग -->
        <div class="match-card">
            <div class="teams">
                <div class="team">
                    <div class="skeleton" style="width: 24px; height: 24px; border-radius: 50%;"></div>
                    <div class="skeleton" style="width: 100px; height: 20px;"></div>
                </div>
                <div class="skeleton" style="width: 50px; height: 20px;"></div>
                <div class="team">
                    <div class="skeleton" style="width: 100px; height: 20px;"></div>
                    <div class="skeleton" style="width: 24px; height: 24px; border-radius: 50%;"></div>
                </div>
            </div>
            <div class="info">
                <div class="skeleton" style="width: 80px; height: 16px;"></div>
                <div class="skeleton" style="width: 80px; height: 16px;"></div>
            </div>
        </div>
    </div>

    <p class="last-update" id="last-update">अपडेट हो रहा है...</p>

    <footer>
        FastIPL - सबसे तेज़ IPL स्कोर अपडेट
    </footer>

    <script>
        // API से डेटा फ़ेच करने का कोड
        async function fetchLiveScores() {
            try {
                // वास्तविक API के लिए: https://api.cricapi.com/v1/currentMatches
                // यहाँ हम एक मॉक API का उपयोग कर रहे हैं
                const mockData = {
                    status: "success",
                    data: [
                        {
                            id: "1",
                            name: "IPL Match 1",
                            matchType: "t20",
                            series: "IPL",
                            status: "Live",
                            venue: "Wankhede Stadium, Mumbai",
                            date: "2023-05-01",
                            teams: ["MI", "CSK"],
                            score: [
                                {
                                    inning: "MI",
                                    r: 145,
                                    w: 4,
                                    o: 18.2,
                                    batsman: [
                                        { name: "R Sharma", runs: 65, balls: 45 },
                                        { name: "I Kishan", runs: 28, balls: 20 }
                                    ],
                                    bowler: { name: "J Bumrah", wickets: 2, runs: 28 }
                                },
                                {
                                    inning: "CSK",
                                    r: 132,
                                    w: 6,
                                    o: 16.5,
                                    batsman: [
                                        { name: "R Jadeja", runs: 45, balls: 30 },
                                        { name: "M Dhoni", runs: 22, balls: 12 }
                                    ],
                                    bowler: { name: "D Chahar", wickets: 3, runs: 32 }
                                }
                            ],
                            recentOvers: [
                                {
                                    over: 16,
                                    balls: [
                                        { runs: 1, isWicket: false },
                                        { runs: 4, isWicket: false },
                                        { runs: 0, isWicket: false },
                                        { runs: 6, isWicket: false },
                                        { runs: 1, isWicket: false },
                                        { runs: 0, isWicket: true }
                                    ]
                                },
                                {
                                    over: 17,
                                    balls: [
                                        { runs: 1, isWicket: false },
                                        { runs: 2, isWicket: false },
                                        { runs: 1, isWicket: false },
                                        { runs: 0, isWicket: false },
                                        { runs: 4, isWicket: false },
                                        { runs: 1, isWicket: false }
                                    ]
                                }
                            ]
                        },
                        {
                            id: "2",
                            name: "IPL Match 2",
                            matchType: "t20",
                            series: "IPL",
                            status: "Upcoming",
                            venue: "Eden Gardens, Kolkata",
                            date: "2023-05-02",
                            teams: ["KKR", "RCB"],
                            score: []
                        }
                    ]
                };

                // वास्तविक API कॉल के लिए (अनकमेंट करें):
                // const response = await fetch('https://api.cricapi.com/v1/currentMatches?apikey=YOUR_API_KEY');
                // const data = await response.json();
                
                // मॉक डेटा का उपयोग करें
                const data = mockData;
                
                if(data.status !== "success") {
                    throw new Error("API error");
                }
                
                return data.data.filter(match => match.matchType === "t20" && match.series === "IPL");
            } catch (error) {
                console.error("Error fetching data:", error);
                return null;
            }
        }

        // डेटा को UI में डिस्प्ले करना
        function updateUI(matches) {
            const matchesContainer = document.getElementById('matches');
            matchesContainer.innerHTML = '';
            
            if(!matches || matches.length === 0) {
                matchesContainer.innerHTML = '<div class="no-matches">कोई लाइव मैच नहीं मिला</div>';
                document.getElementById('last-update').textContent = `अंतिम अपडेट: ${new Date().toLocaleTimeString()}`;
                return;
            }
            
            matches.forEach(match => {
                const matchCard = document.createElement('div');
                matchCard.className = 'match-card';
                
                // टीमों की जानकारी
                const team1 = match.teams[0];
                const team2 = match.teams[1];
                const score1 = match.score?.find(s => s.inning === team1);
                const score2 = match.score?.find(s => s.inning === team2);
                
                matchCard.innerHTML = `
                    <div class="teams">
                        <div class="team">
                            <div>${getTeamEmoji(team1)}</div>
                            <div>${team1}</div>
                        </div>
                        <div class="score">
                            ${score1 ? `${score1.r}/${score1.w}` : '0/0'}
                            ${score1 ? `<span style="font-size:0.8rem;display:block">${score1.o} ओवर</span>` : ''}
                        </div>
                        <div class="team">
                            <div>${team2}</div>
                            <div>${getTeamEmoji(team2)}</div>
                        </div>
                    </div>
                    <div class="info">
                        <div>${match.status}</div>
                        <div>${match.venue}</div>
                    </div>
                    ${match.recentOvers ? renderRecentBalls(match.recentOvers) : ''}
                `;
                
                matchesContainer.appendChild(matchCard);
            });
            
            document.getElementById('last-update').textContent = `अंतिम अपडेट: ${new Date().toLocaleTimeString()}`;
        }

        // टीम इमोजी
        function getTeamEmoji(team) {
            const emojis = {
                'MI': '💙', // मुंबई इंडियंस
                'CSK': '🟡', // चेन्नई सुपर किंग्स
                'RCB': '🔴', // रॉयल चैलेंजर्स बैंगलोर
                'KKR': '🟣', // कोलकाता नाइट राइडर्स
                'DC': '🔵',  // दिल्ली कैपिटल्स
                'PBKS': '❤️', // पंजाब किंग्स
                'RR': '🔵',  // राजस्थान रॉयल्स
                'SRH': '🧡', // सनराइजर्स हैदराबाद
                'LSG': '🟢', // लखनऊ सुपर जायंट्स
                'GT': '🟠'   // गुजरात टाइटन्स
            };
            return emojis[team] || '🏏';
        }

        // रीसेंट बॉल्स डिस्प्ले
        function renderRecentBalls(overs) {
            if(!overs || overs.length === 0) return '';
            
            const balls = overs.flatMap(over => over.balls);
            const last5Balls = balls.slice(-5);
            
            let ballsHTML = '<div class="balls">';
            last5Balls.forEach(ball => {
                let ballClass = 'ball';
                if(ball.isWicket) ballClass += ' wicket';
                else if(ball.runs === 4) ballClass += ' four';
                else if(ball.runs === 6) ballClass += ' six';
                
                ballsHTML += `<div class="${ballClass}">${ball.isWicket ? 'W' : ball.runs}</div>`;
            });
            ballsHTML += '</div>';
            
            return ballsHTML;
        }

        // मुख्य फंक्शन
        async function updateScores() {
            const matches = await fetchLiveScores();
            updateUI(matches);
        }

        // पहली बार डेटा लोड करें
        updateScores();
        
        // हर 30 सेकंड में अपडेट
        setInterval(updateScores, 30000);
        
        // ऑफलाइन सपोर्ट
        window.addEventListener('online', updateScores);

        // PWA इंस्टॉलेशन
        if('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed: ', err));
        }
    </script>
</body>
</html>
